<div class="min-h-screen bg-[var(--background)] text-[var(--text-primary)]" [attr.dir]="i18n.isRTL() ? 'rtl' : 'ltr'">
  <!-- Header -->
  <header class="bg-[var(--surface)] border-b border-[var(--border)] px-6 py-4 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <div class="brand w-10 h-10 rounded-lg flex items-center justify-center text-white bg-[var(--primary)]">🕋</div>
      <div>
        <div class="text-lg font-bold">Manisik</div>
        <div class="text-sm text-[var(--text-secondary)]">{{ i18n.t('dashboard.subtitle') }}</div>
      </div>
    </div>

    <div class="flex items-center gap-3">
      <button class="icon-btn" aria-label="notifications">🔔<span class="badge">3</span></button>
      <button class="icon-btn" (click)="auth.logout()">{{ i18n.t('nav.logout') }}</button>
    </div>
  </header>

  <div class="max-w-[1200px] mx-auto px-4 py-8">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
      <!-- Sidebar -->
      <aside class="lg:col-span-3 hidden lg:block">
        <nav class="space-y-2">
          <a class="nav-link bg-[var(--primary)] text-white">{{ i18n.t('dashboard.menu.dashboard') }}</a>
          <a *ngIf="role()==='User'" class="nav-link">{{ i18n.t('dashboard.menu.book') }}</a>
          <a *ngIf="role()==='User'||role()==='HotelManager'" class="nav-link">{{ i18n.t('dashboard.menu.hotels') }}</a>
          <a *ngIf="role()==='User'" class="nav-link">{{ i18n.t('dashboard.menu.transport') }}</a>
          <a *ngIf="role()==='User'" class="nav-link">{{ i18n.t('dashboard.menu.myBookings') }}</a>
          <a *ngIf="role()==='User'" class="nav-link">{{ i18n.t('dashboard.menu.payments') }}</a>
          <a *ngIf="role()==='Admin'" class="nav-link">{{ i18n.t('dashboard.menu.manageUsers') }}</a>
          <a *ngIf="role()==='HotelManager'" class="nav-link">{{ i18n.t('dashboard.menu.manageHotels') }}</a>
        </nav>
      </aside>

      <!-- Main -->
      <main class="lg:col-span-9 space-y-6">
        <!-- Welcome banner -->
        <section class="card welcome-card p-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4">
          <div>
            <h2 class="text-2xl font-semibold">{{ i18n.t('dashboard.greeting') }}, {{ currentUser()?.firstName || 'User' }}!</h2>
            <p class="text-[var(--text-secondary)] mt-1">
              <span *ngIf="role() === 'User'">{{ i18n.t('dashboard.welcome.user') }}</span>
              <span *ngIf="role() === 'Admin'">{{ i18n.t('dashboard.welcome.admin') }}</span>
              <span *ngIf="role() === 'HotelManager'">{{ i18n.t('dashboard.welcome.hotelManager') }}</span>
            </p>
          </div>

          <div class="flex gap-4 items-center">
            <div class="stat">
              <div class="stat-value">{{ upcomingTrips().length }}</div>
              <div class="stat-label">{{ i18n.t('dashboard.upcomingTrips') }}</div>
            </div>
            <div class="stat">
              <div class="stat-value">{{ recentActivity().length }}</div>
              <div class="stat-label">{{ i18n.t('dashboard.recentActivity') }}</div>
            </div>
            <div>
              <button class="btn-primary">{{ i18n.t('hero.cta.book') }}</button>
            </div>
          </div>
        </section>

        <!-- Quick stats -->
        <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
          <div class="card p-4">
            <div class="text-sm text-[var(--text-secondary)]">{{ i18n.t('dashboard.upcomingTrips') }}</div>
            <div class="text-2xl font-bold mt-2">{{ upcomingTrips().length }}</div>
            <div class="text-xs text-[var(--text-secondary)]">{{ i18n.t('dashboard.nextTripDate') }}</div>
          </div>

          <div class="card p-4">
            <div class="text-sm text-[var(--text-secondary)]">{{ i18n.t('dashboard.totalBookings') }}</div>
            <div class="text-2xl font-bold mt-2">{{ recentActivity().length }}</div>
            <div class="text-xs text-[var(--text-secondary)]">{{ i18n.t('dashboard.allTime') }}</div>
          </div>

          <div class="card p-4">
            <div class="text-sm text-[var(--text-secondary)]">{{ i18n.t('dashboard.stats.savedItems') }}</div>
            <div class="text-2xl font-bold mt-2">7</div>
            <div class="text-xs text-[var(--text-secondary)]">{{ i18n.t('dashboard.stats.hotelsPackages') }}</div>
          </div>

          <div class="card p-4">
            <div class="text-sm text-[var(--text-secondary)]">{{ i18n.t('dashboard.stats.loyaltyPoints') }}</div>
            <div class="text-2xl font-bold mt-2">2,450</div>
            <div class="text-xs text-[var(--text-secondary)]">{{ i18n.t('dashboard.stats.earnMore') }}</div>
          </div>
        </section>

        <!-- Bookings & Activity -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-4">
          <div>
            <h3 class="mb-4 text-lg font-semibold">{{ i18n.t('dashboard.upcomingTrips') }}</h3>

            <!-- Skeleton while loading -->
            <div *ngIf="loading()" class="space-y-3">
              <div class="skeleton h-20 rounded"></div>
              <div class="skeleton h-20 rounded"></div>
            </div>

            <div *ngIf="!loading() && upcomingTrips().length === 0" class="card p-4 text-[var(--text-secondary)]">
              {{ i18n.t('dashboard.upcomingTrips') }}: no upcoming trips
            </div>

            <div *ngFor="let trip of upcomingTrips()" class="card p-4 mb-3">
              <div class="flex justify-between items-center">
                <div>
                  <div class="font-semibold">{{ trip.type }} — {{ trip.destination }}</div>
                  <div class="text-sm text-[var(--text-secondary)]">{{ trip.hotel }}</div>
                </div>
                <div class="text-right">
                  <div class="text-xl font-bold text-[var(--primary)]">{{ trip.daysLeft }}</div>
                  <div class="text-xs text-[var(--text-secondary)]">{{ i18n.t('dashboard.trips.daysLeft') }}</div>
                </div>
              </div>
              <div class="mt-3 flex gap-2">
                <button class="btn-primary" (click)="confirmBooking(trip.id)">{{ i18n.t('dashboard.trips.viewDetails') }}</button>
                <button class="btn-outline">{{ i18n.t('dashboard.trips.downloadDocs') }}</button>
              </div>
            </div>
          </div>

          <div>
            <h3 class="mb-4 text-lg font-semibold">{{ i18n.t('dashboard.recentActivity') }}</h3>

            <div *ngIf="loading()" class="space-y-2">
              <div class="skeleton h-12 rounded"></div>
              <div class="skeleton h-12 rounded"></div>
              <div class="skeleton h-12 rounded"></div>
            </div>

            <div *ngIf="!loading() && recentActivity().length === 0" class="card p-4 text-[var(--text-secondary)]">
              No recent activity
            </div>

            <div *ngFor="let activity of recentActivity()" class="card p-3 mb-2 flex items-center justify-between">
              <div>
                <div class="text-sm">{{ activity.action }}</div>
                <div class="text-xs text-[var(--text-secondary)]">{{ activity.item }}</div>
              </div>
              <div class="text-xs text-[var(--text-secondary)]">{{ activity.time }}</div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>
</div>
