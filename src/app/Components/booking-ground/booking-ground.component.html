<div class="max-w-3xl mx-auto p-6 bg-[var(--color-surface)] rounded-lg shadow-md my-10">
    <h2 class="text-2xl font-bold mb-4 text-[var(--color-text)]">Book Ground Transport</h2>

    <!-- Loading State -->
    <div *ngIf="!ground" class="text-center py-12">
        <div class="w-16 h-16 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin mx-auto mb-4">
        </div>
        <p class="text-[var(--color-text-muted)]">Loading details...</p>
    </div>

    <!-- Ground Transport Details Card -->
    <div *ngIf="ground" class="border border-[var(--border)] p-4 rounded mb-6 bg-[var(--color-bg)]">
        <h3 class="text-xl font-semibold text-[var(--color-text)]">{{ ground.serviceName || 'Ground Transport' }}</h3>
        <p class="text-[var(--color-text-muted)]">Route: {{ ground.pickupLocation || ground.from }} â†’ {{
            ground.dropoffLocation || ground.to }}</p>
        <p class="text-[var(--color-text-muted)]">Type: {{ ground.type || 'Standard' }}</p>
        <p class="text-[var(--color-text-muted)]">Price per person: {{ pricePerPerson | currency:'SAR' }}</p>
    </div>

    <form *ngIf="ground" [formGroup]="bookingForm" (ngSubmit)="submit()" class="space-y-4">
        <!-- Pickup Location -->
        <div>
            <label class="block mb-1 font-medium text-[var(--color-text)]">Pickup Location <span
                    class="text-red-500">*</span></label>
            <input type="text" formControlName="pickupLocation" maxlength="200"
                class="border border-[var(--border)] rounded px-4 py-2 w-full outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)] bg-[var(--color-bg)]"
                [class.border-red-500]="bookingForm.get('pickupLocation')?.touched && bookingForm.get('pickupLocation')?.invalid"
                placeholder="E.g. Terminal 1, Hotel Lobby..." />
            <div *ngIf="bookingForm.get('pickupLocation')?.touched && bookingForm.get('pickupLocation')?.invalid"
                class="text-red-600 text-sm mt-1">
                <span *ngIf="bookingForm.get('pickupLocation')?.errors?.['required']">Required</span>
            </div>
        </div>

        <!-- Dropoff Location -->
        <div>
            <label class="block mb-1 font-medium text-[var(--color-text)]">Dropoff Location <span
                    class="text-red-500">*</span></label>
            <input type="text" formControlName="dropoffLocation" maxlength="200"
                class="border border-[var(--border)] rounded px-4 py-2 w-full outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)] bg-[var(--color-bg)]"
                [class.border-red-500]="bookingForm.get('dropoffLocation')?.touched && bookingForm.get('dropoffLocation')?.invalid"
                placeholder="E.g. Makkah Hotel Entrance..." />
            <div *ngIf="bookingForm.get('dropoffLocation')?.touched && bookingForm.get('dropoffLocation')?.invalid"
                class="text-red-600 text-sm mt-1">
                <span *ngIf="bookingForm.get('dropoffLocation')?.errors?.['required']">Required</span>
            </div>
        </div>

        <!-- Number of Passengers -->
        <div>
            <label class="block mb-1 font-medium text-[var(--color-text)]">Number of Passengers</label>
            <input type="number" formControlName="passengers" min="1" max="50"
                class="border border-[var(--border)] rounded px-4 py-2 w-full outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)] bg-[var(--color-bg)]"
                [class.border-red-500]="bookingForm.get('passengers')?.touched && bookingForm.get('passengers')?.invalid" />
            <div *ngIf="bookingForm.get('passengers')?.touched && bookingForm.get('passengers')?.invalid"
                class="text-red-600 text-sm mt-1">
                <span *ngIf="bookingForm.get('passengers')?.errors?.['required']">Required</span>
                <span *ngIf="bookingForm.get('passengers')?.errors?.['min']">Minimum 1 passenger</span>
            </div>
        </div>

        <!-- Total Price -->
        <div class="text-lg font-semibold text-[var(--color-text)]">
            Total Price: {{ total | currency:'SAR' }}
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-4">
            <button type="button" (click)="cancel()" [disabled]="isSubmitting"
                class="flex-1 px-4 py-2 font-medium text-[var(--color-text)] bg-[var(--color-bg)] border border-[var(--border)] rounded hover:bg-[var(--color-surface)] transition-all disabled:opacity-50">
                Cancel
            </button>
            <button type="submit"
                class="flex-1 text-white font-medium px-4 py-2 rounded transition-all duration-200
          disabled:bg-gray-400 disabled:cursor-not-allowed
          bg-[var(--primary)] hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:ring-offset-2"
                [disabled]="isSubmitting || bookingForm.invalid">
                <span *ngIf="!isSubmitting">Confirm Booking</span>
                <span *ngIf="isSubmitting">Processing...</span>
            </button>
        </div>
    </form>
</div>