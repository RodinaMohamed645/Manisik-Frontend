<section class="transport-section flex flex-col min-h-screen align-items-center bg-[var(--color-bg)] text-[var(--color-text)]">

  <mat-toolbar class="transport-toolbar">
    <div class="transport-container">
      <div class="transport-text">
        <h1 class="transport-title">{{ i18n.t('transport.title') }}</h1>
        <p class="transport-sub">{{ i18n.t ('transport.subtitle') }}</p>
      </div>
    </div>
  </mat-toolbar>

  <div class="container mt-8">

    <!-- Tabs -->
    <div class="transport-tabs">
      <button class="tab-button" [class.active]="activeTab === 'international'" (click)="setActiveTab('international')">
        <span class="material-icons">flight</span>
        International
      </button>
      <button class="tab-button" [class.active]="activeTab === 'ground'" (click)="setActiveTab('ground')">
        <span class="material-icons">directions_bus</span>
        Ground
      </button>
    </div>

    <!-- International Transport Section -->
    <div *ngIf="activeTab === 'international'">

      <!-- International Filters -->
      <div class="search-form" style="background: var(--color-surface); box-shadow: var(--shadow-light);">
        <div class="form-row">
          <div class="form-group">
            <label class="text-[var(--color-text)]">Type</label>
            <select [(ngModel)]="internationalSearchParams.type" class="bg-[var(--color-bg)] text-[var(--color-text)] border border-[var(--border)]" (change)="filterInternational()">
              <option value="All" class="bg-[var(--color-bg)] text-[var(--color-text)]">All</option>
              <option value="Plane" class="bg-[var(--color-bg)] text-[var(--color-text)]">Plane</option>
              <option value="Ship" class="bg-[var(--color-bg)] text-[var(--color-text)]">Ship</option>
            </select>
          </div>
          <div class="form-group">
            <label class="text-[var(--color-text)]">From</label>
            <select [(ngModel)]="internationalSearchParams.departure" class="bg-[var(--color-bg)] text-[var(--color-text)] border border-[var(--border)]" (change)="filterInternational()">
              <option value="" class="bg-[var(--color-bg)] text-[var(--color-text)]">All</option>
              <option *ngFor="let airport of departureAirports" [value]="airport">{{ airport }}</option>
            </select>
          </div>
          <div class="form-group">
            <label class="text-[var(--color-text)]">To</label>
            <select [(ngModel)]="internationalSearchParams.arrival" class="bg-[var(--color-bg)] text-[var(--color-text)] border border-[var(--border)]" (change)="filterInternational()">
              <option value="" class="bg-[var(--color-bg)] text-[var(--color-text)]">All</option>
              <option *ngFor="let airport of arrivalAirports" [value]="airport">{{ airport }}</option>
            </select>
          </div>
          <button class="search-button bg-[var(--primary)] text-white" (click)="filterInternational()">Filter</button>
        </div>
      </div>

      <!-- International List -->
      <div class="flight-card" *ngFor="let transport of filteredInternationalTransports" style="background: var(--color-surface); box-shadow: var(--shadow-light);">
        <div class="airline-logo" style="background: var(--color-bg); color: var(--color-text);">
          <span class="material-icons">{{ transport.internationalTransportType === 'Plane' ? 'flight' : 'directions_boat' }}</span>
        </div>

        <div class="airline-info">
          <div class="airline-name">
            <h3 class="text-[var(--color-text)]">{{ transport.carrierName }}</h3>
            <div class="rating" style="color: var(--color-text-muted);">
              <span class="material-icons star-icon">star</span>
              <strong>{{ transport.flightNumber }}</strong>
            </div>
          </div>
          <div class="flight-details">
            <span class="detail-label" style="color: var(--color-text-muted);">Departure</span>
            <span class="detail-value" style="color: var(--color-text);">{{ transport.departureAirport }}</span>
          </div>
          <div class="flight-details">
            <span class="detail-label" style="color: var(--color-text-muted);">Arrival</span>
            <span class="detail-value" style="color: var(--color-text);">{{ transport.arrivalAirport }}</span>
          </div>
          <div class="flight-details">
            <span class="detail-label" style="color: var(--color-text-muted);">Date</span>
            <span class="detail-value" style="color: var(--color-text);">{{ transport.departureDate | date }}</span>
          </div>
        </div>

        <div class="price-section flex flex-col items-end gap-2">
          <div class="price" style="color: var(--primary);">${{ transport.price }}</div>
          <div class="seats" class="text-xs text-[var(--color-text-muted)] mb-2">
            {{ transport.availableSeats }} seats left
          </div>
          <button class="book-button mt-2" style="background: var(--primary); color: white;" (click)="bookTransport(transport)">
            {{ i18n.t('transport.book.button') }}
          </button>
        </div>
      </div>

      <div *ngIf="filteredInternationalTransports.length === 0" class="no-results">
        <p>No international transport options found.</p>
      </div>
    </div>

    <!-- Ground Transport Section -->
    <div *ngIf="activeTab === 'ground'">

      <!-- Ground Filters -->
      <div class="search-form" style="background: var(--color-surface); box-shadow: var(--shadow-light);">
        <div class="form-row">
          <div class="form-group">
            <label class="text-[var(--color-text)]">Service Type</label>
            <select [(ngModel)]="groundSearchParams.type" class="bg-[var(--color-bg)] text-[var(--color-text)] border border-[var(--border)]" (change)="filterGround()">
              <option value="All" class="bg-[var(--color-bg)] text-[var(--color-text)]">All</option>
              <option value="PrivateCar" class="bg-[var(--color-bg)] text-[var(--color-text)]">Private Car</option>
              <option value="SharedBus" class="bg-[var(--color-bg)] text-[var(--color-text)]">Shared Bus</option>
              <option value="Taxi" class="bg-[var(--color-bg)] text-[var(--color-text)]">Taxi</option>
            </select>
          </div>
          <button class="search-button bg-[var(--primary)] text-white" (click)="filterGround()">Filter</button>
        </div>
      </div>

      <!-- Ground List -->
      <div class="flight-card" *ngFor="let transport of filteredGroundTransports" style="background: var(--color-surface); box-shadow: var(--shadow-light);">
        <div class="airline-logo" style="background: var(--color-bg); color: var(--color-text);">
          <span class="material-icons">directions_bus</span>
        </div>

        <div class="airline-info">
          <div class="airline-name">
            <h3 class="text-[var(--color-text)]">{{ transport.serviceName }}</h3>
            <div class="rating" style="color: var(--color-text-muted);">
              <span class="material-icons star-icon">star</span>
              <strong>{{ transport.description }}</strong>
            </div>
          </div>
          <div class="flight-details">
            <span class="detail-label" style="color: var(--color-text-muted);">Capacity</span>
            <span class="detail-value" style="color: var(--color-text);">{{ transport.capacity }} Persons</span>
          </div>
          <div class="flight-details">
            <span class="detail-label" style="color: var(--color-text-muted);">Type</span>
            <span class="detail-value" style="color: var(--color-text);">{{ transport.serviceName }}</span>
          </div>
        </div>

        <div class="price-section flex flex-col items-end gap-2">
          <div class="price" style="color: var(--primary);">${{ transport.pricePerPerson }}</div>
          <div class="seats" class="text-xs text-[var(--color-text-muted)] mb-2">
            per person
          </div>
          <button class="book-button mt-2" style="background: var(--primary); color: white;" (click)="bookTransport(transport)">
            {{ i18n.t('transport.book.button') }}
          </button>
        </div>
      </div>

      <div *ngIf="filteredGroundTransports.length === 0" class="no-results">
        <p>No ground transport options found.</p>
      </div>
    </div>

  </div>
</section>
